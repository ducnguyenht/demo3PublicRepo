@using HtmlAgilityPack;
@using KiotVietBO;
@{
    var sx = (Request.QueryString["sx"] == null) ? "" : Request.QueryString["sx"];
    var sxb = "sx=" + sx;
    var categoryId = (Request.QueryString["pt"] == null) ? "" : Request.QueryString["pt"];
    int currentPage = 1;
    if (!int.TryParse(HttpContext.Current.Request.QueryString["Trang"], out currentPage))
    {
        currentPage = 1;
    }
    currentPage--;
    var dsNhomHang = MemoryCacheKiot.dsNhomHang.data;
    var categoryIdInt = Convert.ToInt32(categoryId);
    var nhomHangWithLevel = new NhomHangBLL().DanhNhomHangPlane().Where(o => o.categoryId == categoryIdInt).FirstOrDefault();
    switch (nhomHangWithLevel.level)
    {
        case 0:
            var nhomHangLv0 = dsNhomHang.Where(o => o.categoryId == categoryIdInt).FirstOrDefault();
            if (nhomHangLv0.children != null && nhomHangLv0.children.Count > 0)
            {
                foreach (var nhomHangLv1 in nhomHangLv0.children)
                {
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box_intro_cat"></div>
                            <section id="product-listitem">
                                <div class="listitem">
                                    <h2>
                                        <span>
                                            @Html.Raw(nhomHangLv1.categoryName)
                                        </span>
                                        <a href="/danh-muc?pt=@nhomHangLv1.categoryId" title="Xem tất cả" class="all">Xem tất cả</a>
                                    </h2>
                                    <div class="row">
                                        @{
                                            if (!nhomHangLv1.hasChild)
                                            {
                                                var dsHangHoaChild = new HangHoaBLL().DanhSachHangHoa(nhomHangLv1.categoryId.ToString(), "0", null, "8");
                                                if (dsHangHoaChild.data != null && dsHangHoaChild.data.Count() != 0)
                                                {
                                                    foreach (var item in dsHangHoaChild.data)
                                                    {
                                                        var idsp = @item.id;
                                                        var idd = "addToCartButton" + @item.id;
                                                        var image = item.images != null ? item.images[0] : "Images/noimageb.png";
                                                        <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6 col94 mg">
                                                            <div class="product">
                                                                <a href="/danh-muc/san-pham?pt=@item.id" title="@item.name">
                                                                    <div class="image">
                                                                        <div class="img-overflow">
                                                                            <div style="background-image:url(@image);height:190px;background-position: center center;background-repeat: no-repeat;background-size: cover;"></div>
                                                                            <div class="ImageOverlayBe"></div>
                                                                        </div>
                                                                        <span class="product product-label-special-right">@Html.Raw(item.ConHang > 0 ? "Còn hàng" : "Hết hàng")</span>
                                                                    </div>
                                                                    <p>@item.name</p>
                                                                    <div class="price">
                                                                        <span class="price-new">
                                                                            @try
                                                                            {
                                                                                @Html.Raw(string.Format("{0:#,##0}", Int32.Parse(item.basePrice.ToString())))
                                                                            }
                                                                            catch
                                                                            {
                                                                                @Html.Raw(item.basePrice.ToString());
                                                                            } đ
                                                                        </span>
                                                                    </div>
                                                                </a>
                                                                <ul class="function">
                                                                    <li>
                                                                        <script type="text/javascript">
                                                                $().ready(function () {
                                                                    $('#@idd').click(function () {
                                                                        $.ajax({
                                                                            type: "GET",
                                                                            url: "/umbraco/surface/CartsSurface/AddToCart",
                                                                            contentType: "application/json",
                                                                            dataType: "json",
                                                                            data: { "pk": "@idsp" },
                                                                            success: function (data) {
                                                                                var a = 'asdf';
                                                                                $('.count').html(data);
                                                                            },
                                                                            error: function (data) { alert("error"); }
                                                                        });
                                                                    });
                                                                });
                                                                        </script>
                                                                        @{
                                                                            var t = item.inventories.Where(o => o.branchId == 13933).FirstOrDefault();
                                                                            if (t != null && t.onHand > 0)
                                                                            {
                                                                                <button type="button" id="@idd" class="btn btnitem addToCartButton">
                                                                                    <i class="fa fa-shopping-cart"></i>
                                                                                </button>
                                                                            }
                                                                        }
                                                                    </li>
                                                                    <li>
                                                                        <a href="/danh-muc/san-pham?pt=@item.id" title="">
                                                                            <button type="button" class="btn btnitem">
                                                                                <i class="fa fa-eye"></i>
                                                                            </button>
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                var item = new NhomHangBLL().DanhNhomHangPlane().Where(o => o.categoryId == nhomHangLv1.categoryId).FirstOrDefault();
                                                var chiTietHangHoas = new List<ChiTietHangHoaBO>();
                                                foreach (var itemChild in item.children)
                                                {
                                                    var pr = MemoryCacheKiot.dsHangHoa.data.Where(o => o.categoryId == itemChild.categoryId);
                                                    chiTietHangHoas.AddRange(pr);
                                                }
                                                Random rnd = new Random();
                                                chiTietHangHoas = chiTietHangHoas.OrderBy(o => rnd.Next(chiTietHangHoas.Count())).Take(8).ToList();
                                                foreach (var item1 in chiTietHangHoas)
                                                {
                                                    var idsp = item1.id;
                                                    var idd = "addToCartButton" + item1.id;
                                                    var image = item1.images != null ? item1.images[0] : "Images/noimageb.png";
                                                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6 col94 mg">
                                                        <div class="product">
                                                            <a href="/danh-muc/san-pham?pt=@item1.id" title="@item1.fullName">
                                                                <div class="image">
                                                                    <div class="img-overflow">
                                                                        <div style="background-image:url(@image);height:190px;background-position: center center;background-repeat: no-repeat;background-size: cover;"></div>
                                                                        <div class="ImageOverlayBe"></div>
                                                                    </div>
                                                                    <span class="product product-label-special-right">@Html.Raw(item1.ConHang > 0 ? "Còn hàng" : "Hết hàng")</span>
                                                                </div>
                                                                <p>@item1.name</p>
                                                                <div class="price">
                                                                    <span class="price-new">
                                                                        @try
                                                                        {
                                                                            @Html.Raw(string.Format("{0:#,##0}", Int32.Parse(item1.basePrice.ToString())));
                                                                        }
                                                                        catch
                                                                        {
                                                                            @Html.Raw(item1.basePrice.ToString());
                                                                        } đ
                                                                    </span>
                                                                </div>
                                                            </a>
                                                            <ul class="function">
                                                                <li>
                                                                    <script type="text/javascript">
                                    $().ready(function () {
                                        $('#@idd').click(function () {
                                            $.ajax({
                                                type: "GET",
                                                url: "/umbraco/surface/CartsSurface/AddToCart",
                                                contentType: "application/json",
                                                dataType: "json",
                                                data: { "pk": "@idsp" },
                                                success: function (data) { $('.count').html(data); },
                                                error: function (data) { alert("error"); }
                                            });
                                        });
                                    });
                                                                    </script>
                                                                    @{
                                                                        var t = item1.inventories.Where(o => o.branchId == 13933).FirstOrDefault();
                                                                        if (t != null && t.onHand > 0)
                                                                        {
                                                                            <button type="button" id="@idd" class="btn btnitem addToCartButton">
                                                                                <i class="fa fa-shopping-cart"></i>
                                                                            </button>
                                                                        }
                                                                    }
                                                                </li>
                                                                <li>
                                                                    <a href="/danh-muc/san-pham?pt=@item1.id" title="">
                                                                        <button type="button" class="btn btnitem">
                                                                            <i class="fa fa-eye"></i>
                                                                        </button>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                }

                                            }

                                        }
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                }
            }
            break;
        case 1:
            if (!nhomHangWithLevel.hasChild)
            {
                var rootHangHoa = new HangHoaBLL().DanhSachHangHoa(categoryId, currentPage.ToString(), sx);
                var pr = rootHangHoa.data;
                if (rootHangHoa.total != 0)
                {
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box_intro_cat"></div>
                            <section id="product-listitem">
                                <div class="filter pull-right">
                                    <div class="order-product pull-left">
                                        <div class="btn-group">
                                            <span class="btn dropdown-toggle" data-toggle="dropdown">
                                                <a href="#">
                                                    <span><i class="fa fa-sort"></i></span>
                                                    <span>Sắp xếp</span>
                                                    <i class="fa fa-angle-down"></i>
                                                </a>
                                            </span>
                                            <ul class="dropdown-menu">
                                                <li>
                                                    <a href="/danh-muc?pt=@categoryId">
                                                        <span>Mặc định</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/danh-muc?sx=4&&pt=@categoryId">
                                                        <span><i class="fa fa-sort-alpha-asc"></i>Tên sản phẩm</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/danh-muc?sx=3&&pt=@categoryId">
                                                        <span><i class="fa fa-sort-alpha-desc"></i>Tên sản phẩm</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/danh-muc?sx=2&&pt=@categoryId">
                                                        <span><i class="fa fa-sort-numeric-asc"></i>Đơn giá</span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/danh-muc?sx=1&&pt=@categoryId">
                                                        <span><i class="fa fa-sort-numeric-desc"></i>Đơn giá</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="listitem">
                                    <h2>
                                        <span>
                                            @if (rootHangHoa.total != 0)
                                            {
                                                @Html.Raw(pr.FirstOrDefault().categoryName)
                                            }
                                        </span>
                                    </h2>
                                    <div class="row">
                                        @{
                                            if (pr.Count() != 0)
                                            {
                                                var itemsPerPage = 16;
                                                var numberOfItems = rootHangHoa.total;
                                                var numberOfPages = numberOfItems % itemsPerPage == 0 ? Math.Ceiling((decimal)(numberOfItems / itemsPerPage)) : Math.Ceiling((decimal)(numberOfItems / itemsPerPage)) + 1;
                                                int vala = currentPage * itemsPerPage;
                                                int valb = itemsPerPage;
                                                foreach (var item in pr)
                                                {
                                                    var idsp = @item.id;
                                                    var idd = "addToCartButton" + @item.id;
                                                    var image = item.images != null ? item.images[0] : "Images/noimageb.png";
                                                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6 col94 mg">
                                                        <div class="product">
                                                            <a href="/danh-muc/san-pham?pt=@item.id" title="@item.name">
                                                                <div class="image">
                                                                    <div class="img-overflow">
                                                                        <div style="background-image:url(@image);height:190px;background-position: center center;background-repeat: no-repeat;background-size: cover;"></div>
                                                                        <div class="ImageOverlayBe"></div>
                                                                    </div>
                                                                    <span class="product product-label-special-right">@Html.Raw(item.ConHang > 0 ? "Còn hàng" : "Hết hàng")</span>
                                                                </div>
                                                                <p>@item.name</p>
                                                                <div class="price">
                                                                    <span class="price-new">
                                                                        @try
                                                                        {
                                                                            @Html.Raw(string.Format("{0:#,##0}", Int32.Parse(item.basePrice.ToString())))
                                                                        }
                                                                        catch
                                                                        {
                                                                            @Html.Raw(item.basePrice.ToString());
                                                                        } đ
                                                                    </span>
                                                                </div>
                                                            </a>
                                                            <ul class="function">
                                                                <li>
                                                                    <script type="text/javascript">
                                                                $().ready(function () {
                                                                    $('#@idd').click(function () {
                                                                        $.ajax({
                                                                            type: "GET",
                                                                            url: "/umbraco/surface/CartsSurface/AddToCart",
                                                                            contentType: "application/json",
                                                                            dataType: "json",
                                                                            data: { "pk": "@idsp" },
                                                                            success: function (data) {
                                                                                $('.count').html(data);
                                                                            },
                                                                            error: function (data) { alert("error"); }
                                                                        });
                                                                    });
                                                                });
                                                                    </script>
                                                                    @{
                                                                        var t = item.inventories.Where(o => o.branchId == 13933).FirstOrDefault();
                                                                        if (t != null && t.onHand > 0)
                                                                        {
                                                                            <button type="button" id="@idd" class="btn btnitem addToCartButton">
                                                                                <i class="fa fa-shopping-cart"></i>
                                                                            </button>
                                                                        }
                                                                    }
                                                                </li>
                                                                <li>
                                                                    <a href="/danh-muc/san-pham?pt=@item.id" title="">
                                                                        <button type="button" class="btn btnitem">
                                                                            <i class="fa fa-eye"></i>
                                                                        </button>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                }
                                                <ul class="pagination pull-right">
                                                    @{
                                                        var Pages = Enumerable.Range(1, (int)numberOfPages);
                                                        if (currentPage > 0)
                                                        {
                                                            <li><a href="/danh-muc?Trang=@(currentPage)&&pt=@categoryId&&@sxb" title="">...</a></li>
                                                        }
                                                        foreach (var number in Pages)
                                                        {
                                                            if (currentPage - 2 <= number && currentPage + 4 >= number)
                                                            {
                                                                if (number - 1 != currentPage)
                                                                {
                                                                    <li><a href="/danh-muc?Trang=@number&&pt=@categoryId&&@sxb">@number</a></li>
                                                                }
                                                                else
                                                                {
                                                                    <li class="active"><a href="javascript:{}">@number</a></li>
                                                                }
                                                            }
                                                        }
                                                        if (currentPage < Pages.Count() - 1)
                                                        {
                                                            <li><a href="/danh-muc?Trang=@(currentPage + 2)&&pt=@categoryId&&@sxb">...</a></li>
                                                        }
                                                    }
                                                </ul>
                                            }
                                        }
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                }
            }
            else
            {
                var dsNhomHangBO = new NhomHangBO();
                foreach (var item in dsNhomHang)
                {
                    if (item.hasChild)
                    {
                        NhomHangBO search = item.children.Where(o => o.categoryId == Convert.ToInt32(categoryId)).FirstOrDefault();
                        if (search != null)
                        {
                            dsNhomHangBO = search;
                        }
                    }
                }
                if (dsNhomHangBO.children != null && dsNhomHangBO.children.Count > 0)
                {
                    foreach (var chiTietNhomHangCon in dsNhomHangBO.children)
                    {
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box_intro_cat"></div>
                                <section id="product-listitem">
                                    <div class="listitem">
                                        <h2>
                                            <span>
                                                @Html.Raw(chiTietNhomHangCon.categoryName)
                                            </span>
                                            <a href="/danh-muc?pt=@chiTietNhomHangCon.categoryId" title="Xem tất cả" class="all">Xem tất cả</a>
                                        </h2>
                                        <div class="row">
                                            @{
                                                var dsHangHoaChild = new HangHoaBLL().DanhSachHangHoa(chiTietNhomHangCon.categoryId.ToString(), "0", null, "8");
                                                if (dsHangHoaChild.data != null && dsHangHoaChild.data.Count() != 0)
                                                {
                                                    foreach (var item in dsHangHoaChild.data)
                                                    {
                                                        var idsp = @item.id;
                                                        var idd = "addToCartButton" + @item.id;
                                                        var image = item.images != null ? item.images[0] : "Images/noimageb.png";
                                                        <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6 col94 mg">
                                                            <div class="product">
                                                                <a href="/danh-muc/san-pham?pt=@item.id" title="@item.name">
                                                                    <div class="image">
                                                                        <div class="img-overflow">
                                                                            <div style="background-image:url(@image);height:190px;background-position: center center;background-repeat: no-repeat;background-size: cover;"></div>
                                                                            <div class="ImageOverlayBe"></div>
                                                                        </div>
                                                                        <span class="product product-label-special-right">@Html.Raw(item.ConHang > 0 ? "Còn hàng" : "Hết hàng")</span>
                                                                    </div>
                                                                    <p>@item.name</p>
                                                                    <div class="price">
                                                                        <span class="price-new">
                                                                            @try
                                                                            {
                                                                                @Html.Raw(string.Format("{0:#,##0}", Int32.Parse(item.basePrice.ToString())))
                                                                            }
                                                                            catch
                                                                            {
                                                                                @Html.Raw(item.basePrice.ToString());
                                                                            } đ
                                                                        </span>
                                                                    </div>
                                                                </a>
                                                                <ul class="function">
                                                                    <li>
                                                                        <script type="text/javascript">
                                                                    $().ready(function () {
                                                                        $('#@idd').click(function () {
                                                                            $.ajax({
                                                                                type: "GET",
                                                                                url: "/umbraco/surface/CartsSurface/AddToCart",
                                                                                contentType: "application/json",
                                                                                dataType: "json",
                                                                                data: { "pk": "@idsp" },
                                                                                success: function (data) { $('.count').html(data); },
                                                                                error: function (data) { alert("error"); }
                                                                            });
                                                                        });
                                                                    });
                                                                        </script>
                                                                        @{
                                                                            var t = item.inventories.Where(o => o.branchId == 13933).FirstOrDefault();
                                                                            if (t != null && t.onHand > 0)
                                                                            {
                                                                                <button type="button" id="@idd" class="btn btnitem addToCartButton">
                                                                                    <i class="fa fa-shopping-cart"></i>
                                                                                </button>
                                                                            }
                                                                        }
                                                                    </li>
                                                                    <li>
                                                                        <a href="/danh-muc/san-pham?pt=@item.id" title="">
                                                                            <button type="button" class="btn btnitem">
                                                                                <i class="fa fa-eye"></i>
                                                                            </button>
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    }
                                                }
                                            }
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                }
            }
            break;
        case 2:
            var rootHangHoa1 = new HangHoaBLL().DanhSachHangHoa(categoryId, currentPage.ToString(), sx);
            var pr1 = rootHangHoa1.data;
            if (rootHangHoa1.total != 0)
            {
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 box_intro_cat"></div>
                        <section id="product-listitem">
                            <div class="filter pull-right">
                                <div class="order-product pull-left">
                                    <div class="btn-group">
                                        <span class="btn dropdown-toggle" data-toggle="dropdown">
                                            <a href="#">
                                                <span><i class="fa fa-sort"></i></span>
                                                <span>Sắp xếp</span>
                                                <i class="fa fa-angle-down"></i>
                                            </a>
                                        </span>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a href="/danh-muc?pt=@categoryId">
                                                    <span>Mặc định</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="/danh-muc?sx=4&&pt=@categoryId">
                                                    <span><i class="fa fa-sort-alpha-asc"></i>Tên sản phẩm</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="/danh-muc?sx=3&&pt=@categoryId">
                                                    <span><i class="fa fa-sort-alpha-desc"></i>Tên sản phẩm</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="/danh-muc?sx=2&&pt=@categoryId">
                                                    <span><i class="fa fa-sort-numeric-asc"></i>Đơn giá</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="/danh-muc?sx=1&&pt=@categoryId">
                                                    <span><i class="fa fa-sort-numeric-desc"></i>Đơn giá</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="listitem">
                                <h2>
                                    <span>
                                        @if (rootHangHoa1.total != 0)
                                        {
                                            @Html.Raw(pr1.FirstOrDefault().categoryName)
                                        }
                                    </span>
                                </h2>
                                <div class="row">
                                    @{
                                        if (pr1.Count() != 0)
                                        {
                                            var itemsPerPage = 16;
                                            var numberOfItems = rootHangHoa1.total;
                                            var numberOfPages = numberOfItems % itemsPerPage == 0 ? Math.Ceiling((decimal)(numberOfItems / itemsPerPage)) : Math.Ceiling((decimal)(numberOfItems / itemsPerPage)) + 1;
                                            int vala = currentPage * itemsPerPage;
                                            int valb = itemsPerPage;
                                            foreach (var item in pr1)
                                            {
                                                var idsp = @item.id;
                                                var idd = "addToCartButton" + @item.id;
                                                var image = item.images != null ? item.images[0] : "Images/noimageb.png";
                                                <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6 col94 mg">
                                                    <div class="product">
                                                        <a href="/danh-muc/san-pham?pt=@item.id" title="@item.name">
                                                            <div class="image">
                                                                <div class="img-overflow">
                                                                    <div style="background-image:url(@image);height:190px;background-position: center center;background-repeat: no-repeat;background-size: cover;"></div>
                                                                    <div class="ImageOverlayBe"></div>
                                                                </div>
                                                                <span class="product product-label-special-right">@Html.Raw(item.ConHang > 0 ? "Còn hàng" : "Hết hàng")</span>
                                                            </div>
                                                            <p>@item.name</p>
                                                            <div class="price">
                                                                <span class="price-new">
                                                                    @try
                                                                    {
                                                                        @Html.Raw(string.Format("{0:#,##0}", Int32.Parse(item.basePrice.ToString())))
                                                                    }
                                                                    catch
                                                                    {
                                                                        @Html.Raw(item.basePrice.ToString());
                                                                    } đ
                                                                </span>
                                                            </div>
                                                        </a>
                                                        <ul class="function">
                                                            <li>
                                                                <script type="text/javascript">
                                                            $().ready(function () {
                                                                $('#@idd').click(function () {
                                                                    $.ajax({
                                                                        type: "GET",
                                                                        url: "/umbraco/surface/CartsSurface/AddToCart",
                                                                        contentType: "application/json",
                                                                        dataType: "json",
                                                                        data: { "pk": "@idsp" },
                                                                        success: function (data) { $('.count').html(data); },
                                                                        error: function (data) { alert("error"); }
                                                                    });
                                                                });
                                                            });
                                                                </script>
                                                                @{
                                                                    var t = item.inventories.Where(o => o.branchId == 13933).FirstOrDefault();
                                                                    if (t != null && t.onHand > 0)
                                                                    {
                                                                        <button type="button" id="@idd" class="btn btnitem addToCartButton">
                                                                            <i class="fa fa-shopping-cart"></i>
                                                                        </button>
                                                                    }
                                                                }
                                                            </li>
                                                            <li>
                                                                <a href="/danh-muc/san-pham?pt=@item.id" title="">
                                                                    <button type="button" class="btn btnitem">
                                                                        <i class="fa fa-eye"></i>
                                                                    </button>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            }
                                            <ul class="pagination pull-right">
                                                @{
                                                    var Pages = Enumerable.Range(1, (int)numberOfPages);
                                                    if (currentPage > 0)
                                                    {
                                                        <li><a href="/danh-muc?Trang=@(currentPage)&&pt=@categoryId&&@sxb" title="">...</a></li>
                                                    }
                                                    foreach (var number in Pages)
                                                    {
                                                        if (currentPage - 2 <= number && currentPage + 4 >= number)
                                                        {
                                                            if (number - 1 != currentPage)
                                                            {
                                                                <li><a href="/danh-muc?Trang=@number&&pt=@categoryId&&@sxb">@number</a></li>
                                                            }
                                                            else
                                                            {
                                                                <li class="active"><a href="javascript:{}">@number</a></li>
                                                            }
                                                        }
                                                    }
                                                    if (currentPage < Pages.Count() - 1)
                                                    {
                                                        <li><a href="/danh-muc?Trang=@(currentPage + 2)&&pt=@categoryId&&@sxb">...</a></li>
                                                    }
                                                }
                                            </ul>
                                        }
                                    }
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            }
            break;
    }
}