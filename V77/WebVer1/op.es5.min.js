"use strict";(function(n){n(function(){var e=[],o=n(".js-producer"),l=n(".js-phones"),r=n(".js-phone"),t=n(".js-img"),i=n(".js-txt"),u=n(".js-font"),f=n(".js-size"),s=n(".js-input-txt"),a=n(".js-mask"),y=n(".m-mask-txt"),v=n(".js-btn-order"),h=n(".js-mask-inner"),c=n(".js-color");n(window).on("load resize",function(){var r,e,c;a.css({width:t.width(),height:t.height(),top:"calc((100% - "+t.height()+"px) / 2)"});h.css({width:t.height()-20,height:t.width()-20});i.text(s.val());o.length&&(r=n("#"+o.val()),r.length&&(r.addClass("m-phones--show"),r.children(".js-phone:first-child").addClass("m-phone--active"),t.attr("src",r.children(".js-phone:first-child").data("img"))));u.length&&(e=u.val(),e.length&&i.addClass("m-mask-txt--"+e));f.length&&(c=f.val(),c.length&&i.addClass("m-mask-txt--"+c))});o.on("change",function(){var i=n("#"+n(this).val());i.length&&(l.removeClass("m-phones--show"),i.addClass("m-phones--show"),r.removeClass("m-phone--active"),i.children(".js-phone:first-child").addClass("m-phone--active"),t.attr("src",i.children(".js-phone:first-child").data("img")),h.css({width:t.height()-20,height:t.width()-20}))});u.on("change",function(){var t=n(this).val();t.length&&(n(this).find("option").each(function(t,r){i.removeClass("m-mask-txt--"+n(r).val())}),i.addClass("m-mask-txt--"+t))});f.on("change",function(){var t=n(this).val();t.length&&(n(this).find("option").each(function(t,r){i.removeClass("m-mask-txt--"+n(r).val())}),i.addClass("m-mask-txt--"+t))});r.on("click",function(){r.removeClass("m-phone--active");n(this).addClass("m-phone--active");t.attr("src",n(this).data("img"));h.css({width:t.height()-20,height:t.width()-20})});s.on("change keyup paste",function(){i.text(n(this).val())});c.on("change keyup paste",function(){i.css({color:"#"+n(this).val()})});v.on("click",function(t){r.each(function(t,i){i.classList[2]=="m-phone--active"&&(e=[],e.push({phone:n(i).text(),type:u.children("option:selected").text(),size:f.children("option:selected").text(),color:"#"+c.val(),text:s.val()}),n.ajax({type:"GET",url:"/umbraco/surface/CartsSurface/AddToCartInOpLung",contentType:"application/json",dataType:"json",data:{pk:n(i)[0].id,arr:JSON.stringify(e)},success:function(t){n(".count").html(t)},error:function(){alert("error")}}))});t.preventDefault()})})})(jQuery);