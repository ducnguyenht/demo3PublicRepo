"use strict";var Canvas2Image=function(){function r(n,t,i){var u=n.width,f=n.height,r,e;return t==undefined&&(t=u),i==undefined&&(i=f),r=document.createElement("canvas"),e=r.getContext("2d"),r.width=t,r.height=i,e.drawImage(n,0,0,u,f,0,0,t,i),r}function u(n,t,i,u){return n=r(n,i,u),n.toDataURL(t)}function f(n,t){var i=document.createElement("a"),r;i.href=n;i.download=t;r=new MouseEvent("click",{bubbles:!1,cancelable:!1});i.dispatchEvent(r)}function e(n){var t=document.createElement("img");return t.src=n,t}function o(n){n=n.toLowerCase().replace(/jpg/i,"jpeg");var t=n.match(/png|jpeg|bmp|gif/)[0];return"image/"+t}function s(n){var t,i;if(!window.btoa)throw"btoa undefined";if(t="",typeof n=="string")t=n;else for(i=0;i<n.length;i++)t+=String.fromCharCode(n[i]);return btoa(t)}function h(n){var t=n.width,i=n.height;return n.getContext("2d").getImageData(0,0,t,i)}function c(n,t){return"data:"+t+";base64,"+n}var i=function(){var n=document.createElement("canvas"),t=n.getContext("2d");return{canvas:!!t,imageData:!!t.getImageData,dataURL:!!n.toDataURL,btoa:!!window.btoa}}(),a="image/octet-stream",l=function(n){var t=n.width,i=n.height,r=t*i*3,u=r+54,p=[66,77,u&255,u>>8&255,u>>16&255,u>>24&255,0,0,0,0,54,0,0,0],w=[40,0,0,0,t&255,t>>8&255,t>>16&255,t>>24&255,i&255,i>>8&255,i>>16&255,i>>24&255,1,0,24,0,0,0,0,0,r&255,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=(4-t*3%4)%4,c=n.data,v="",k=t<<2,y=i,l=String.fromCharCode,f,e,o,h,a;do{for(f=k*(y-1),e="",o=0;o<t;o++)h=o<<2,e+=l(c[f+h+2])+l(c[f+h+1])+l(c[f+h]);for(a=0;a<b;a++)e+=String.fromCharCode(0);v+=e}while(--y);return s(p.concat(w))+s(v)},n=function(n,t,e,s,v){var p,y;i.canvas&&i.dataURL&&(typeof n=="string"&&(n=document.getElementById(n)),s==undefined&&(s="png"),v=v==undefined||v.length===0?Date.now()+"."+s:v+"."+s,s=o(s),/bmp/.test(s)?(p=h(r(n,t,e)),y=l(p),f(c(y,downloadMimedownloadMime),v)):(y=u(n,s,t,e),f(y.replace(s,a),v)))},t=function(n,t,f,s){var v,a;if(i.canvas&&i.dataURL)return typeof n=="string"&&(n=document.getElementById(n)),s==undefined&&(s="png"),s=o(s),/bmp/.test(s)?(v=h(r(n,t,f)),a=l(v),e(c(a,"image/bmp"))):(a=u(n,s,t,f),e(a))};return{saveAsImage:n,saveAsPNG:function(t,i,r,u){return n(t,i,r,"png",u)},saveAsJPEG:function(t,i,r,u){return n(t,i,r,"jpeg",u)},saveAsGIF:function(t,i,r,u){return n(t,i,r,"gif",u)},saveAsBMP:function(t,i,r,u){return n(t,i,r,"bmp",u)},convertToImage:t,convertToPNG:function(n,i,r){return t(n,i,r,"png")},convertToJPEG:function(n,i,r){return t(n,i,r,"jpeg")},convertToGIF:function(n,i,r){return t(n,i,r,"gif")},convertToBMP:function(n,i,r){return t(n,i,r,"bmp")}}}();